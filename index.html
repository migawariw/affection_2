<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>なかよし度チェッカー</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>なかよし度チェッカー</h1>
	<p>あなたとポケモンはどれくらいなかよし？</p>
    <div class="input-group">
        <label for="a0">0. なかよしきのみの上限：</label>
        <input type="text" id="a0">　個
    </div>
    <div class="input-group">
        <label for="a1">1. ポイントアップ1個時点：</label>
        <input type="text" id="a1">　個
    </div>
    <div class="input-group">
        <label for="a2">2. ポイントアップ2個時点：</label>
        <input type="text" id="a2">　個
    </div>
    <div class="input-group">
        <label for="a3">3. ポイントアップ3個時点：</label>
        <input type="text" id="a3">　個
    </div>
    <div class="input-group">
        <label for="a4">4. ポイントアップ4個時点：</label>
        <input type="text" id="a4">　個
    </div>
	<!-- ボタン -->
<div class="button-container">
    <button onclick="calculate()">計算</button>
    <button onclick="clearFields()">クリア</button>
</div>


    <div class="output" id="result"></div>
    <script src="script.js"></script>

	<h2>このツールは？</h2>

<p>
    ポケモンSVの「なかよし度」を計算するツールです。
	ポケモンに使える「なかよしきのみ」（ザロクのみ、ネコブのみ、タポルのみ、ロメのみ、ウブのみ、マトマのみ）の個数の上限を元に、0から255の256段階あるなかよし度を計算します。n=1,2,3,4に対して「n個のとき」の列にある左の数字はポイントアップをn個与えた時のなかよし度を表し、（）の中の数字はそのときポケモンに使用できるきのみの上限個数を表します。一番左の列の数字はそれぞれポイントアップを与える前のものです。
</p>

<h2>個数の上限とは？</h2>

<p>
	事前にどれか1種類の「なかよしきのみ」が118個以上ある状態にしておいてください。
    そのきのみを選んでポケモンに使うと、なかよし度が253以下の場合、使える個数を決める画面になります。このとき十字キーの左ボタンを押すと、使える個数の上限が表示されます。この値は、なかよし度によって決まります。これと、ポイントアップを使うと「なかよし度が99以下の場合は+4、100から159の場合は+2、160以上の場合は+0される」という仕様を組み合わせてなかよし度を計算します。
</p>

<h2>ツールの使い方</h2>

<p><strong>注意</strong>: 以下の作業の前に、レポートを書いておくことをお勧めします。（おまかせレポートは非推奨）また、作業中に128歩以上歩くとなかよし度が上がってしまうことがあるので、移動しないようにしてください。事前にどれか1種類の「なかよしきのみ」が118個以上、ポイントアップ（栄養ドリンクやポイントマックスでも可）が4個以上ある状態にしておいてください。</p>

<h3>手順</h3>
<ol>
    <li><strong>ポケモンを選択する</strong><br>なかよし度を知りたいポケモンをてもちに入れてください。</li>

    <li><strong>「なかよしきのみの上限個数」を入力する</strong><br>そのポケモンに与えられる「なかよしきのみ」の個数の上限を入力します（初期状態の上限値）。</li>

    <li><strong>ポイントアップを使う</strong><br>次に、ポイントアップ（栄養ドリンクやポイントマックスでも可）を1つ使います。</li>

    <li><strong>「ポイントアップ1個時点の個数」を入力する</strong><br>ポイントアップを使用後、選んだ「なかよしきのみ」の個数を確認し、その値を「1. ポイントアップ1個時点の個数」に入力して「計算」を押してください。</li>

    <li><strong>繰り返し入力</strong><br>上の手順で候補が1つに絞れない場合は、同様にポイントアップを使って2,3,4の欄に入力してください。4まで入力すれば必ずなかよし度を1つに絞り込むことができます。n=1,2,3,4に対して、ポイントアップをn個使ったときの値は表の「nコのとき」の値に変わります。戻したい場合はリセットしてください。</li>
</ol>

<h3>注意点</h3>

<ul>
    <li>全ての欄に入力しなくても「計算」ボタンを押せば、なかよし度の候補が自動で表示されます。</li>
    <!-- <li>4つの技のPPが全て最大でポイントアップが使えない場合、<strong>SV内で覚え直せる技</strong>があればその技を忘れさせてもう一度覚えなおせばPPが元に戻ってポイントアップが使えると思います。最悪リセットすれば元に戻るのでなんとかなります。</li> -->
    <li>なかよし度254または255のときはきのみの個数を選択することなく使われます。その場合はカラフシティのお姉さんに話しかけましょう。「サイッコーに なかよしだね！！」なら255、「とっても なかよし！」なら254です。</li>
</ul>
<h3>その他（なかよし度に関して自分が考えたことあれこれ）</h3>
<li>なかよし度の詳しい仕様が知りたい方はポケモンwikiを見てください。ちなみにSVではなつき進化するポケモンの進化に必要ななかよし度は160のようです。たとえばなかよし度50のピチューがピカチュウに進化するには110増やす必要があります。</li>
<li>あるなかよし度のポケモンに与えられるきのみの個数の上限はおそらく以下の方法によって決まるようです。「なかよしきのみ」をポケモンに与えた時のなかよし度上昇量は現在のなかよし度が0-99なら+10、100-159なら+5、160-255なら+1されます。例えばなかよし度79のポケモンであれば、79から109になるのに3個、109から164になるのに11個、164から255になるのに91個使われるので3+11+91=105個が使える個数の上限になります。「なかよしきのみ」によるなかよし度上昇にはやすらぎのすずの1.5倍が適用されるようです。
</li>
<li>何も入力しない状態で「計算」を押してもらうとわかるように、なかよし度が大きいほど使えるきのみの個数が少なくなるというものではありません。</li>
<li>数あるなかよし度を上昇させる方法の中でポイントアップを選んだ理由は、バックの中だけで操作が完結し、店売りのアイテムで入手が容易であり、なおかつレポートを事前に書き忘れた時の損失が一番少なく（SV内で覚えられない技を忘れてしまった場合は別ですが）、4個という少ない個数でなつき度を1つに絞ることができるからです。</li>
    <li>孵化した直後のポケモンのなかよし度はポケモンによらず100です。けいけんアメXLを与えると大体20レベル以上は上昇します。けいけんアメの投与では1レベルごとになかよし度+2されるのでこれとやすらぎのすず（なかよし度上昇量が1.5倍）を組み合わせれば確実になつき進化できます。
    </li>
    <li>ポケモンウォッシュ1回するごとに現在のなかよし度によらずなかよし度+10されます。いろいろ試してみたところ、この上昇量はやすらぎのすずを持たせても変わらなさそうです。1回のピクニック中にポケモンウォッシュで上げられる量は+50つまり5回分までのようなので、例えば捕まえた直後のポケモン（初期なかよし度で大抵50）をなつき進化させたければ、例えば5回ウォッシュ→ピクニック閉じる→1回ウォッシュ→ピクニック閉じる→5回ウォッシュしてレベルをあげれば進化します。</li>
    <li>ラッキーは初期なかよし度140もあるので2回で十分です。</li>
    <li>サンドウィッチではてもち全員+20されます。こちらもやすらぎのすずを持たせても変わらなさそうです。</li>
    <li>ポケモンウォッシュを1回行うごとに経験値30が入ります。dlcを入れていて経験値が1.5倍になる「けいけんおまもり」を持っていれば経験値45になるようです。
    </li>
        <h1>（参考）きのみ上限とそのときのなかよし度の候補</h1>
        <table>
            <thead>
                <tr>
                    <th>きのみ上限n</th>
                    <th>なかよし度の候補</th>
                </tr>
            </thead>
            <tbody>
                <tr><td>n &lt; 90</td><td>255-n</td></tr>
                <tr><td>90</td><td>165</td></tr>
                <tr><td>91</td><td>164</td></tr>
                <tr><td>92</td><td>159, 163</td></tr>
                <tr><td>93</td><td>154, 158, 162</td></tr>
                <tr><td>94</td><td>149, 153, 157, 161</td></tr>
                <tr><td>95</td><td>144, 148, 152, 156, 160</td></tr>
                <tr><td>96</td><td>139, 143, 147, 151, 155</td></tr>
                <tr><td>97</td><td>134, 138, 142, 146, 150</td></tr>
                <tr><td>98</td><td>129, 133, 137, 141, 145</td></tr>
                <tr><td>99</td><td>124, 128, 132, 136, 140</td></tr>
                <tr><td>100</td><td>119, 123, 127, 131, 135</td></tr>
                <tr><td>101</td><td>114, 118, 122, 126, 130</td></tr>
                <tr><td>102</td><td>109, 113, 117, 121, 125</td></tr>
                <tr><td>103</td><td>99, 104, 108, 112, 116, 120</td></tr>
                <tr><td>104</td><td>89, 94, 98, 103, 107, 111, 115</td></tr>
                <tr><td>105</td><td>79, 84, 88, 93, 97, 102, 106, 110</td></tr>
                <tr><td>106</td><td>69, 74, 78, 83, 87, 92, 96, 101, 105</td></tr>
                <tr><td>107</td><td>59, 64, 68, 73, 77, 82, 86, 91, 95, 100</td></tr>
                <tr><td>108</td><td>49, 54, 58, 63, 67, 72, 76, 81, 85, 90</td></tr>
                <tr><td>109</td><td>39, 44, 48, 53, 57, 62, 66, 71, 75, 80</td></tr>
                <tr><td>110</td><td>29, 34, 38, 43, 47, 52, 56, 61, 65, 70</td></tr>
                <tr><td>111</td><td>19, 24, 28, 33, 37, 42, 46, 51, 55, 60</td></tr>
                <tr><td>112</td><td>9, 14, 18, 23, 27, 32, 36, 41, 45, 50</td></tr>
                <tr><td>113</td><td>4, 8, 13, 17, 22, 26, 31, 35, 40</td></tr>
                <tr><td>114</td><td>3, 7, 12, 16, 21, 25, 30</td></tr>
                <tr><td>115</td><td>2, 6, 11, 15, 20</td></tr>
                <tr><td>116</td><td>1, 5, 10</td></tr>
                <tr><td>117</td><td>0</td></tr>
            </tbody>
        </table>
</body>
</html>
